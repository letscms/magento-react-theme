import{r as e,j as i}from"./vendor-frSDhvcu.js";import{f as t}from"./index-Vo_pZ44y.js";import"./vendor-apollo-CIbFPnud.js";import"./vendor-router-CdLpK7Hz.js";const o=e.memo((({product:o,onBundleSelectionChange:n})=>{const{items:r}=o,[s,d]=e.useState({}),[c,a]=e.useState(o.price_range.minimum_price.final_price.value);e.useEffect((()=>{const e={};let i=parseFloat(o.price_range.minimum_price.final_price.value);r&&r.forEach((t=>{if(t.options&&t.options.length>0){const n=t.options.find((e=>e.is_default))||t.options[0];n&&(e[t.option_id]={option_id:t.option_id,selection_id:n.id,quantity:n.quantity,price:parseFloat(n.price),product_id:n.product.id,sku:n.product.sku},"PRICE_RANGE"===o.price_view&&(i+=parseFloat(n.price)*n.quantity))}})),d(e),n&&n(e,i)}),[r,o.price_range.minimum_price.final_price.value,o.price_view,n]);const p=(e,i,t)=>{d((o=>{const n={...o},s=r.find((i=>i.option_id===e)).options.find((e=>e.id===i));return s&&(n[e]={option_id:e,selection_id:i,quantity:t||s.quantity,price:parseFloat(s.price),product_id:s.product.id,sku:s.product.sku}),n}))};return e.useEffect((()=>{let e=parseFloat(o.price_range.minimum_price.final_price.value);"PRICE_RANGE"===o.price_view&&(e=0),Object.values(s).forEach((i=>{"PRICE_RANGE"===o.price_view&&(e+=i.price*i.quantity)})),a(e),n&&n(s,e)}),[s,o.price_range.minimum_price.final_price.value,o.price_view,n]),r&&0!==r.length?i.jsxs("div",{className:"mt-4 mb-6 space-y-6",children:[r.map((e=>{var n,r,d,c;return i.jsxs("div",{className:"border p-4 rounded-md shadow-sm bg-gray-50",children:[i.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:[e.title," ",e.required&&i.jsx("span",{className:"text-red-500",children:"*"})]}),e.options&&e.options.length>0?i.jsxs("div",{className:"space-y-3",children:["select"===e.type||"radio"===e.type?i.jsxs("select",{id:`bundle-item-${e.option_id}`,className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:(null==(n=s[e.option_id])?void 0:n.selection_id)||"",onChange:i=>p(e.option_id,parseInt(i.target.value)),disabled:1===e.options.length&&e.required,children:[!e.required&&i.jsx("option",{value:"",children:"None"}),e.options.map((e=>i.jsxs("option",{value:e.id,disabled:"IN_STOCK"!==e.product.stock_status,children:[e.label,"IN_STOCK"!==e.product.stock_status&&" (Out of stock)",e.price>0&&` (+${t(e.price,o.price_range.minimum_price.final_price.currency)})`]},e.id)))]}):"checkbox"===e.type||"multi"===e.type?e.options.map((n=>{var r;return i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:`bundle-opt-${n.id}`,checked:!!(null==(r=s[e.option_id])?void 0:r.find((e=>e.selection_id===n.id))),onChange:i=>{i.target.checked&&p(e.option_id,n.id,n.quantity)},className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",disabled:"IN_STOCK"!==n.product.stock_status}),i.jsxs("label",{htmlFor:`bundle-opt-${n.id}`,className:"ml-2 text-sm "+("IN_STOCK"!==n.product.stock_status?"text-gray-400 line-through":"text-gray-700"),children:[n.label,"IN_STOCK"!==n.product.stock_status&&" (Out of stock)",n.price>0&&` (+${t(n.price,o.price_range.minimum_price.final_price.currency)})`]})]},n.id)})):i.jsxs("p",{className:"text-sm text-gray-500",children:["Unsupported option type: ",e.type]}),s[e.option_id]&&(null==(r=e.options.find((i=>i.id===s[e.option_id].selection_id)))?void 0:r.can_change_quantity)&&i.jsxs("div",{className:"mt-2 flex items-center",children:[i.jsx("label",{htmlFor:`qty-${e.option_id}`,className:"text-sm font-medium text-gray-700 mr-2",children:"Quantity:"}),i.jsx("input",{type:"number",id:`qty-${e.option_id}`,min:e.required?1:0,value:(null==(d=s[e.option_id])?void 0:d.quantity)||1,onChange:i=>((e,i,t)=>{const o=parseInt(t,10);o>=0&&p(e,i,o)})(e.option_id,s[e.option_id].selection_id,i.target.value),className:"w-20 py-1 px-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",disabled:!s[e.option_id]||"IN_STOCK"!==(null==(c=e.options.find((i=>i.id===s[e.option_id].selection_id)))?void 0:c.product.stock_status)})]})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"No options available for this item."})]},e.option_id)})),"PRICE_RANGE"===o.price_view&&i.jsx("div",{className:"mt-6 pt-4 border-t",children:i.jsxs("h4",{className:"text-xl font-semibold text-gray-800",children:["Bundle Price: ",t(c,o.price_range.minimum_price.final_price.currency)]})})]}):i.jsx("p",{children:"This bundle product has no items configured."})}));export{o as default};
//# sourceMappingURL=BundleProductOptions-h6fo1WsC.js.map
