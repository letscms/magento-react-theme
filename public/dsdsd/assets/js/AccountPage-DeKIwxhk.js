import{r as a,j as e}from"./vendor-frSDhvcu.js";import{i as s,g as t,l as n}from"./index-CvpdAI6N.js";import{u as i,a as o,L as d,O as r}from"./vendor-router-CdLpK7Hz.js";import"./vendor-apollo-CIbFPnud.js";function l(){const[l,c]=a.useState(null),[m,x]=a.useState(!0),[h,u]=a.useState(null),f=i(),p=o();a.useEffect((()=>{if(!s())return void f("/login",{state:{from:p.pathname}});(async()=>{var a;try{const a=await t();c(a)}catch(e){u("Failed to load account information. Please try again."),401===(null==(a=e.response)?void 0:a.status)&&f("/login",{state:{from:p.pathname}})}finally{x(!1)}})()}),[f,p.pathname]);const g=a=>"/account"===a&&"/account"===p.pathname||p.pathname.startsWith(a)&&"/account"!==a;return m?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"})}):h?e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-4 shadow-md rounded bg-white",children:[e.jsx("div",{className:"text-red-600 mb-4",children:h}),e.jsx("button",{onClick:()=>f("/login"),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded",children:"Back to Login"})]}):e.jsx("div",{className:"bg-gray-50 py-8",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsxs("div",{className:"md:w-1/4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-indigo-100 rounded-full p-3",children:e.jsx("i",{className:"fas fa-user text-indigo-600 text-xl"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"font-bold text-lg",children:[null==l?void 0:l.firstname," ",null==l?void 0:l.lastname]}),e.jsx("p",{className:"text-gray-600 text-sm",children:null==l?void 0:l.email})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsxs("nav",{className:"flex flex-col",children:[[{name:"Dashboard",path:"/account",icon:"fas fa-tachometer-alt"},{name:"My Orders",path:"/account/orders",icon:"fas fa-shopping-bag"},{name:"My Addresses",path:"/account/addresses",icon:"fas fa-map-marker-alt"},{name:"Account Information",path:"/account/edit",icon:"fas fa-user-edit"},{name:"My Reviews",path:"/account/reviews",icon:"fas fa-star"}].map((a=>e.jsxs(d,{to:a.path,className:"flex items-center px-6 py-3 hover:bg-gray-50 "+(g(a.path)?"bg-indigo-50 border-l-4 border-indigo-600 text-indigo-600":"text-gray-700"),children:[e.jsx("i",{className:`${a.icon} w-5 mr-3 ${g(a.path)?"text-indigo-600":"text-gray-500"}`}),e.jsx("span",{children:a.name})]},a.path))),e.jsxs("button",{onClick:async()=>{try{await n(),window.location.href="/"}catch(a){u("Logout failed. Please try again.")}},className:"flex items-center px-6 py-3 text-red-600 hover:bg-red-50 mt-2",children:[e.jsx("i",{className:"fas fa-sign-out-alt w-5 mr-3"}),e.jsx("span",{children:"Logout"})]})]})})]}),e.jsx("div",{className:"md:w-3/4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsx(r,{context:{user:l}})})})]})})})}export{l as default};
//# sourceMappingURL=AccountPage-DeKIwxhk.js.map
