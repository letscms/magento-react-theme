{"version":3,"file":"AccountPage-DeKIwxhk.js","sources":["../../../src/pages/AccountPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, Outlet, useLocation } from 'react-router-dom';\nimport { getCurrentCustomer, logout, isAuthenticated } from '../api/auth';\n\nfunction AccountPage() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    // Check if user is authenticated\n    if (!isAuthenticated()) {\n      navigate('/login', { state: { from: location.pathname } });\n      return;\n    }\n\n    // Fetch user data\n    const fetchUserData = async () => {\n      try {\n        const userData = await getCurrentCustomer();\n        setUser(userData);\n      } catch (err) {\n        console.error('Failed to fetch user data:', err);\n        setError('Failed to load account information. Please try again.');\n        \n        // If token is invalid, redirect to login\n        if (err.response?.status === 401) {\n          navigate('/login', { state: { from: location.pathname } });\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchUserData();\n  }, [navigate, location.pathname]);\n\n  // Navigation items for the sidebar\n  const navigationItems = [\n    { name: 'Dashboard', path: '/account', icon: 'fas fa-tachometer-alt' },\n    { name: 'My Orders', path: '/account/orders', icon: 'fas fa-shopping-bag' },\n    { name: 'My Addresses', path: '/account/addresses', icon: 'fas fa-map-marker-alt' },\n    { name: 'Account Information', path: '/account/edit', icon: 'fas fa-user-edit' },\n    { name: 'My Reviews', path: '/account/reviews', icon: 'fas fa-star' },  \n    \n  ];\n\n  // Check if the current path matches a navigation item\n  const isActive = (path) => {\n    if (path === '/account' && location.pathname === '/account') {\n      return true;\n    }\n    return location.pathname.startsWith(path) && path !== '/account';\n  };\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n       window.location.href = '/';\n    } catch (err) {\n      console.error('Logout failed:', err);\n      setError('Logout failed. Please try again.');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"max-w-md mx-auto mt-10 p-4 shadow-md rounded bg-white\">\n        <div className=\"text-red-600 mb-4\">{error}</div>\n        <button\n          onClick={() => navigate('/login')}\n          className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded\"\n        >\n          Back to Login\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-gray-50 py-8\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex flex-col md:flex-row gap-8\">\n          {/* Sidebar */}\n          <div className=\"md:w-1/4\">\n            {/* User Profile Card */}\n            <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"bg-indigo-100 rounded-full p-3\">\n                  <i className=\"fas fa-user text-indigo-600 text-xl\"></i>\n                </div>\n                <div>\n                  <h2 className=\"font-bold text-lg\">{user?.firstname} {user?.lastname}</h2>\n                  <p className=\"text-gray-600 text-sm\">{user?.email}</p>\n                </div>\n              </div>\n            </div>\n            \n            {/* Navigation Menu */}\n            <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n              <nav className=\"flex flex-col\">\n                {navigationItems.map((item) => (\n                  <Link\n                    key={item.path}\n                    to={item.path}\n                    className={`flex items-center px-6 py-3 hover:bg-gray-50 ${\n                      isActive(item.path) ? 'bg-indigo-50 border-l-4 border-indigo-600 text-indigo-600' : 'text-gray-700'\n                    }`}\n                  >\n                    <i className={`${item.icon} w-5 mr-3 ${isActive(item.path) ? 'text-indigo-600' : 'text-gray-500'}`}></i>\n                    <span>{item.name}</span>\n                  </Link>\n                ))}\n                \n                <button\n                  onClick={handleLogout}\n                  className=\"flex items-center px-6 py-3 text-red-600 hover:bg-red-50 mt-2\"\n                >\n                  <i className=\"fas fa-sign-out-alt w-5 mr-3\"></i>\n                  <span>Logout</span>\n                </button>\n              </nav>\n            </div>\n          </div>\n          \n          {/* Main Content */}\n          <div className=\"md:w-3/4\">\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\n              {/* This is where nested routes will render */}\n              <Outlet context={{ user }} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AccountPage;\n"],"names":["AccountPage","user","setUser","useState","loading","setLoading","error","setError","navigate","useNavigate","location","useLocation","useEffect","isAuthenticated","state","from","pathname","async","userData","getCurrentCustomer","err","_a","response","status","fetchUserData","isActive","path","startsWith","className","children","jsxs","jsx","jsxRuntimeExports","onClick","firstname","lastname","email","name","icon","map","item","Link","to","logout","window","href","Outlet","context"],"mappings":"+MAIA,SAASA,IACP,MAAOC,EAAMC,GAAWC,EAAAA,SAAS,OAC1BC,EAASC,GAAcF,EAAAA,UAAS,IAChCG,EAAOC,GAAYJ,EAAAA,SAAS,MAC7BK,EAAWC,IACXC,EAAWC,IAEjBC,EAAAA,WAAU,KAEJ,IAACC,IAEH,YADSL,EAAA,SAAU,CAAEM,MAAO,CAAEC,KAAML,EAASM,YAKzBC,iBAChB,IACI,MAAAC,QAAiBC,IACvBjB,EAAQgB,SACDE,GAEPb,EAAS,yDAGoB,OAAzB,OAAAc,EAAID,EAAAE,eAAU,EAAAD,EAAAE,SACPf,EAAA,SAAU,CAAEM,MAAO,CAAEC,KAAML,EAASM,WAC/C,CACA,QACAX,GAAW,EAAK,GAINmB,KACb,CAAChB,EAAUE,EAASM,WAGvB,MAUMS,EAAYC,GACH,aAATA,GAA6C,aAAtBhB,EAASM,UAG7BN,EAASM,SAASW,WAAWD,IAAkB,aAATA,EAa/C,OAAItB,QAEC,OAAIwB,UAAU,wCACbC,eAAC,MAAI,CAAAD,UAAU,kFAKjBtB,IAEAwB,KAAC,MAAI,CAAAF,UAAU,wDACbC,SAAA,CAACE,EAAAA,IAAA,MAAA,CAAIH,UAAU,oBAAqBC,SAAMvB,IAC1C0B,EAAAD,IAAC,SAAA,CACCE,QAAS,IAAMzB,EAAS,UACxBoB,UAAU,2EACXC,SAAA,qBAQLE,EAAAA,IAAC,MAAI,CAAAH,UAAU,kBACbC,WAAAE,IAAC,MAAI,CAAAH,UAAU,yBACbC,SAAAG,EAAAF,KAAC,MAAI,CAAAF,UAAU,kCAEbC,SAAA,GAACC,KAAA,MAAA,CAAIF,UAAU,WAEbC,SAAA,CAAAE,EAAAA,IAAC,OAAIH,UAAU,yCACbC,SAACC,EAAAA,KAAA,MAAA,CAAIF,UAAU,8BACbC,SAAA,CAAAE,EAAAA,IAAC,OAAIH,UAAU,iCACbC,eAAC,IAAE,CAAAD,UAAU,iDAEd,MACC,CAAAC,SAAA,GAACC,KAAA,KAAA,CAAGF,UAAU,oBAAqBC,SAAA,CAAM,MAAA5B,OAAA,EAAAA,EAAAiC,UAAU,IAAQ,MAANjC,OAAM,EAAAA,EAAAkC,YAC1DJ,EAAAA,IAAA,IAAA,CAAEH,UAAU,wBAAyBC,SAAM,aAAA,EAAA5B,EAAAmC,sBAMjD,MAAI,CAAAR,UAAU,gDACbC,SAACC,EAAAA,KAAA,MAAA,CAAIF,UAAU,gBACZC,SAAA,CAvES,CACtB,CAAEQ,KAAM,YAAaX,KAAM,WAAYY,KAAM,yBAC7C,CAAED,KAAM,YAAaX,KAAM,kBAAmBY,KAAM,uBACpD,CAAED,KAAM,eAAgBX,KAAM,qBAAsBY,KAAM,yBAC1D,CAAED,KAAM,sBAAuBX,KAAM,gBAAiBY,KAAM,oBAC5D,CAAED,KAAM,aAAcX,KAAM,mBAAoBY,KAAM,gBAkEzBC,KAAKC,GACpBR,EAAAF,KAACW,EAAA,CAECC,GAAIF,EAAKd,KACTE,UAAW,iDACTH,EAASe,EAAKd,MAAQ,4DAA8D,iBAGtFG,SAAA,GAAAE,IAAC,IAAE,CAAAH,UAAW,GAAGY,EAAKF,iBAAiBb,EAASe,EAAKd,MAAQ,kBAAoB,sBACjFK,IAAC,OAAM,CAAAF,SAAAW,EAAKH,SAPPG,EAAKd,QAWdM,EAAAF,KAAC,SAAA,CACCG,QApEKhB,UACf,UACI0B,IACLC,OAAOlC,SAASmC,KAAO,UACjBzB,GAEPb,EAAS,mCAAkC,GA+D/BqB,UAAU,gEAEVC,SAAA,GAACE,IAAA,IAAA,CAAEH,UAAU,mCACbG,IAAC,QAAKF,SAAM,sBAOnBE,MAAA,MAAA,CAAIH,UAAU,WACbC,eAAC,MAAI,CAAAD,UAAU,oCAEbC,SAAAE,EAAAA,IAACe,GAAOC,QAAS,CAAE9C,oBAOjC"}