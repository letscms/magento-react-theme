{"version":3,"file":"WishlistPage-CQdz6QJ6.js","sources":["../../../src/pages/WishlistPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useWishlist } from \"../context/WishlistContext\";\nimport { isAuthenticated } from \"../api/auth\";\nimport LoadingSpinner from \"../utils/Loader\";\nimport { formatPrice } from \"../utils/formatters\";\nimport EmptyState from \"../components/ui/EmptyState\";\nimport AddToCartButton from \"../components/cart/AddToCartButton\";\n\nconst WishlistPage = () => {\n  const { wishlistItems, loading, removeItemFromWishlist, refreshWishlist } = useWishlist();\n  const navigate = useNavigate();\n  const [error, setError] = useState(\"\");\n  // Check authentication once, not on every render\n  const fetchWishlist = useCallback(async () => {\n    const user = isAuthenticated();\n   \n    if (!user) {\n      navigate(\"/login\", { state: { from: \"/wishlist\" } });\n      return;\n    }\n    \n    try {\n      await refreshWishlist();\n      setError(\"\");\n    } catch (err) {\n      console.error(\"Error fetching wishlist:\", err);\n      setError(\"Failed to load wishlist items\");\n    }\n  }, [navigate, refreshWishlist]);\n\n  useEffect(() => {\n    fetchWishlist();\n  }, []);\n\n  const handleRemoveFromWishlist = async (productId) => {\n    try {\n      await removeItemFromWishlist(productId);\n      setError(\"\");\n    } catch (err) {\n      console.error(\"Error removing from wishlist:\", err);\n      setError(\"Failed to remove item from wishlist\");\n    }\n  };\n  if (loading) {\n    return <LoadingSpinner />;\n  }\n  \n  if (error) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <h1 className=\"text-2xl font-bold mb-6\">My Wishlist</h1>\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\n          <p>{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!wishlistItems || wishlistItems.length === 0) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <h1 className=\"text-2xl font-bold mb-6\">My Wishlist</h1>\n        <EmptyState\n          title=\"Your wishlist is empty\"\n          description=\"Items added to your wishlist will appear here.\"\n          actionText=\"Continue Shopping\"\n          actionLink=\"/\"\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-2xl font-bold mb-6\">My Wishlist</h1>\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n        {wishlistItems.map((product) => (\n          <div \n            key={product._id} \n            className=\"border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\"\n          >\n            <Link to={`/product/${product.url_key}`}>\n              <div className=\"h-48 overflow-hidden\">\n                <img\n                  src={product.images && product.images[0]}\n                  alt={product.name}\n                  className=\"w-full h-full object-cover\"\n                />\n              </div>\n            </Link>\n            \n            <div className=\"p-4\">\n              <Link to={`/product/${product.url_key}`}>\n                <h2 className=\"text-lg font-medium text-gray-800 mb-2 hover:text-indigo-600 transition-colors\">\n                  {product.name}\n                </h2>\n              </Link>\n              \n              <p className=\"text-gray-600 mb-2 line-clamp-2\">{product.description}</p>\n              \n              <div className=\"flex justify-between items-center mb-4\">\n                <span className=\"text-lg font-bold text-gray-900\">\n                  {formatPrice(product.price)}\n                </span>\n                {product.stock_status == \"IN_STOCK\" ? (\n                  <span className=\"text-sm text-green-600\">In Stock</span>\n                ) : (\n                  <span className=\"text-sm text-red-600\">Out of Stock</span>\n                )}\n              </div>\n              \n              <div className=\"flex space-x-2\">\n                <AddToCartButton \n                  product={product} \n                  className=\"flex-1 bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 transition-colors\"\n                />\n                \n                <button\n                  onClick={() => handleRemoveFromWishlist(product._id)}\n                  className=\"p-2 text-gray-500 hover:text-red-500 border border-gray-300 rounded-md\"\n                  aria-label=\"Remove from wishlist\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    className=\"h-5 w-5\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                </button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default WishlistPage;\n"],"names":["WishlistPage","wishlistItems","loading","removeItemFromWishlist","refreshWishlist","useWishlist","navigate","useNavigate","error","setError","useState","fetchWishlist","useCallback","async","isAuthenticated","err","state","from","useEffect","LoadingSpinner","jsxs","className","children","jsx","jsxRuntimeExports","length","map","product","Link","to","url_key","src","images","alt","name","description","formatPrice","price","stock_status","AddToCartButton","onClick","productId","handleRemoveFromWishlist","_id","xmlns","viewBox","fill","fillRule","d","clipRule","EmptyState","title","actionText","actionLink"],"mappings":"qUASA,MAAMA,EAAe,KACnB,MAAMC,cAAEA,EAAeC,QAAAA,EAAAC,uBAASA,EAAwBC,gBAAAA,GAAoBC,IACtEC,EAAWC,KACVC,EAAOC,GAAYC,EAAAA,SAAS,IAE7BC,EAAgBC,EAAAA,aAAYC,UAGhC,GAFaC,IAOT,UACIV,IACNK,EAAS,UACFM,GAEPN,EAAS,gCAA+B,MATxCH,EAAS,SAAU,CAAEU,MAAO,CAAEC,KAAM,iBAWrC,CAACX,EAAUF,IAEdc,EAAAA,WAAU,KACMP,MACb,IAWH,OAAIT,QACMiB,EAAe,IAGrBX,IAEAY,KAAC,MAAI,CAAAC,UAAU,8BACbC,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,0BAA0BC,SAAW,sBAClD,MAAI,CAAAD,UAAU,kEACbC,SAACE,EAAAD,IAAA,IAAA,CAAGD,kBAMPrB,GAA0C,IAAzBA,EAAcwB,SAelCL,KAAC,MAAI,CAAAC,UAAU,8BACbC,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,0BAA0BC,SAAW,sBAElD,MAAI,CAAAD,UAAU,sEACZC,SAAcrB,EAAAyB,KAAKC,GAClBH,EAAAJ,KAAC,MAAA,CAECC,UAAU,gGAEVC,SAAA,GAACC,IAAAK,EAAA,CAAKC,GAAI,YAAYF,EAAQG,UAC5BR,WAAAC,IAAC,MAAI,CAAAF,UAAU,uBACbC,SAAAE,EAAAD,IAAC,MAAA,CACCQ,IAAKJ,EAAQK,QAAUL,EAAQK,OAAO,GACtCC,IAAKN,EAAQO,KACbb,UAAU,qCAKhBD,KAAC,MAAI,CAAAC,UAAU,MACbC,SAAA,CAAAC,EAAAA,IAACK,EAAK,CAAAC,GAAI,YAAYF,EAAQG,UAC5BR,WAACC,IAAA,KAAA,CAAGF,UAAU,iFACXC,SAAQK,EAAAO,SAIZX,EAAAA,IAAA,IAAA,CAAEF,UAAU,kCAAmCC,WAAQa,gBAExDf,KAAC,MAAI,CAAAC,UAAU,yCACbC,SAAA,CAAAC,MAAC,QAAKF,UAAU,kCACbC,SAAYc,EAAAT,EAAQU,SAEE,YAAxBV,EAAQW,aACPf,EAAAA,IAAC,OAAK,CAAAF,UAAU,yBAAyBC,SAAA,eAEzCC,IAAC,OAAK,CAAAF,UAAU,uBAAuBC,SAAY,sBAIvDF,KAAC,MAAI,CAAAC,UAAU,iBACbC,SAAA,CAAAE,EAAAD,IAACgB,EAAA,CACCZ,UACAN,UAAU,+FAGZG,EAAAD,IAAC,SAAA,CACCiB,QAAS,IArFQ3B,OAAO4B,IAClC,UACItC,EAAuBsC,GAC7BhC,EAAS,UACFM,GAEPN,EAAS,sCAAqC,GA+EnBiC,CAAyBf,EAAQgB,KAChDtB,UAAU,yEACV,aAAW,uBAEXC,SAAAE,EAAAD,IAAC,MAAA,CACCqB,MAAM,6BACNvB,UAAU,UACVwB,QAAQ,YACRC,KAAK,eAELxB,SAAAE,EAAAD,IAAC,OAAA,CACCwB,SAAS,UACTC,EAAE,qMACFC,SAAS,wBArDdtB,EAAQgB,cAnBnBvB,KAAC,MAAI,CAAAC,UAAU,8BACbC,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,0BAA0BC,SAAW,gBACnDE,EAAAD,IAAC2B,EAAA,CACCC,MAAM,yBACNhB,YAAY,iDACZiB,WAAW,oBACXC,WAAW"}