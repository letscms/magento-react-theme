import{r as e,j as t}from"./vendor-frSDhvcu.js";import{f as r}from"./index-CvpdAI6N.js";import"./vendor-apollo-CIbFPnud.js";import"./vendor-router-CdLpK7Hz.js";const l=e.memo((({product:l,onVariantChange:n,selectedOptions:i})=>{var o,a;const{configurable_options:u,variants:d}=l,[s,c]=e.useState({}),[v,m]=e.useState(null),b=e.useRef(!1),x=e.useRef(null);e.useEffect((()=>{if(!u||b.current)return;const e={};u.forEach((t=>{var r;const l=t.attribute_code;if(null==i?void 0:i[l])e[l]=i[l];else{const n=t.values.find((e=>null==d?void 0:d.some((t=>{var r;return null==(r=t.attributes)?void 0:r.some((t=>t.code===l&&t.value_index===e.value_index))}))));e[l]=(null==n?void 0:n.value_index)??(null==(r=t.values[0])?void 0:r.value_index)}})),c(e),b.current=!0}),[l]);return e.useEffect((()=>{if(!d||0===Object.keys(s).length)return void(null!==x.current&&(m(null),null==n||n(null,s),x.current=null));if(!(null==u?void 0:u.every((e=>void 0!==s[e.attribute_code]))))return void(null!==x.current&&(m(null),null==n||n(null,s),x.current=null));const e=d.find((e=>{var t;return null==(t=e.attributes)?void 0:t.every((e=>s[e.code]===e.value_index))}));e!==x.current&&(m(e||null),null==n||n(e||null,s),x.current=e||null)}),[s,d,u]),(null==u?void 0:u.length)?t.jsxs("div",{className:"mt-4 mb-6 space-y-4",children:[u.map((r=>t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.attribute_code||r.label}),t.jsx("div",{className:"flex flex-wrap gap-2",children:r.values.map((l=>{var n;const i=s[r.attribute_code]===l.value_index,o=null==(n=l.swatch_data)?void 0:n.value,a=/^#([0-9A-F]{3}){1,2}$/i.test(o||""),u=e.useMemo((()=>null==d?void 0:d.some((e=>{var t;return!!(null==(t=e.attributes)?void 0:t.some((e=>e.code===r.attribute_code&&e.value_index===l.value_index)))&&Object.entries(s).every((([t,l])=>{var n;return t===r.attribute_code||(null==(n=e.attributes)?void 0:n.some((e=>e.code===t&&e.value_index===l)))}))}))),[s,d]),v={type:"button",onClick:()=>{return e=r.attribute_code,t=l.value_index,void c((r=>({...r,[e]:t})));var e,t},disabled:!u,title:l.label};return a?t.jsx("button",{...v,className:`w-8 h-8 rounded-full border-2\n        ${i?"ring-2 ring-offset-1 ring-indigo-500 border-indigo-500":"border-gray-300"}\n        ${u?"hover:border-gray-400":"opacity-50 cursor-not-allowed"}`,style:{backgroundColor:o},"aria-label":l.label},l.value_index):t.jsx("button",{...v,className:`px-3 py-1 border rounded text-sm\n        ${i?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300"}\n        ${u?"hover:border-gray-500":"opacity-50 cursor-not-allowed line-through"}`,children:l.label},l.value_index)}))})]},r.attribute_code))),(null==v?void 0:v.product)&&t.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded border border-gray-200",children:[t.jsxs("p",{className:"text-sm font-medium text-gray-800",children:["Selected: ",v.product.name]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",v.product.sku]}),(null==(a=null==(o=v.product.price_range)?void 0:o.minimum_price)?void 0:a.final_price)&&t.jsxs("p",{className:"text-sm text-indigo-600 font-semibold",children:["Price:"," ",r(v.product.price_range.minimum_price.final_price.value,v.product.price_range.minimum_price.final_price.currency)]}),t.jsx("p",{className:"text-sm "+("IN_STOCK"===v.product.stock_status?"text-green-600":"text-red-600"),children:"IN_STOCK"===v.product.stock_status?"In Stock":"Out of Stock"})]}),!v&&Object.keys(s).length>0&&u.length===Object.keys(s).length&&t.jsx("div",{className:"mt-4 p-3 bg-red-50 rounded border border-red-200",children:t.jsx("p",{className:"text-sm text-red-700",children:"The selected combination is not available."})})]}):null}));export{l as default};
//# sourceMappingURL=ConfigurableProductOptions-3-YHUHuT.js.map
